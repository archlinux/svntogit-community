# $Id$
# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
# Contributor: Christoph Zeiler <archNOSPAM_at_moonblade.dot.org>

# Note: This packae is proprietary and distribution is limited. However, we
# have written permission to by the FMOD CEO to distribute this in binary form.
pkgname=fmodex
pkgver=4.40.08
pkgrel=1
pkgdesc="An advanced audio engine"
arch=('i686' 'x86_64')
url="http://www.fmod.org/"
license=('custom')
md5sums=('66886f371dfd38e65893621f4b778aaa')
[ "$CARCH" = "x86_64" ] && {
	_pkgarch=64
  md5sums=('06117ec85125c307bb7e5049eb5a602e')
}
source=("http://www.fmod.org/index.php/release/version/fmodapi${pkgver//./}linux${_pkgarch}.tar.gz")

build() {
  cd fmodapi${pkgver//./}linux${_pkgarch}

  mkdir -p ${pkgdir}/usr/lib

  sed -i /fmodexp64/d Makefile
  make DESTLIBDIR=${pkgdir}/usr/lib \
	DESTHDRDIR=${pkgdir}/usr/include/fmodex \
	install

  install -Dm644 documentation/LICENSE.TXT ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE

  mkdir -p ${pkgdir}/usr/share/doc/fmodex
  cp -r documentation examples ${pkgdir}/usr/share/doc/fmodex

  cd ${pkgdir}/usr/lib

  for i in libfmodex; do
    ln -sf $i$_pkgarch-$pkgver.so $i$_pkgarch.so
    [ "$CARCH" = "x86_64" ] && ln -sf $i$_pkgarch.so $i.so
    :
  done
}

# vim:set ts=2 sw=2 et:
