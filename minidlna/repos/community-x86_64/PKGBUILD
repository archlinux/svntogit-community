# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Maintainer:Biginoz < biginoz AT free point fr>
# Contributor: Ignacio Galmarino <igalmarino@gmail.com>
# Contributor: Matthias Sobczyk <matthias.sobczyk@googlemail.com>

pkgname=minidlna
pkgver=1.0.22
pkgrel=3
pkgdesc="A DLNA/UPnP-AV Media server (aka ReadyDLNA)"
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/minidlna/"
license=('GPL')
depends=('libexif' 'libjpeg' 'libid3tag' 'flac' 'libvorbis' 'ffmpeg' 'sqlite3')
conflicts=('minidlna-cvs')
backup=('etc/minidlna.conf'
	'etc/conf.d/minidlna')
changelog=changelog
source=(http://downloads.sourceforge.net/minidlna/minidlna_${pkgver}_src.tar.gz
        minidlna.rc)
md5sums=('3de2f6b54f43bb998dfad3c8fa75cef3'
         '8b064a6c344a3ad8029e2619dfe07b77')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"
  DESTDIR=$pkgdir make install
  install -D -m755 ${srcdir}/minidlna.rc ${pkgdir}/etc/rc.d/minidlna
  mkdir -p $pkgdir/etc/conf.d
  echo 'MINIDLNA_USER=nobody' >$pkgdir/etc/conf.d/minidlna
}
