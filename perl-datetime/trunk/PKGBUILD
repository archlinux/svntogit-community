# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: François Charette <firmicus ατ gmx δοτ net>

pkgname=perl-datetime
pkgver=0.58
pkgrel=1
pkgdesc="A complete, easy to use date and time object"
arch=('i686' 'x86_64')
url="http://search.cpan.org/dist/DateTime"
license=('GPL' 'PerlArtistic')
depends=('perl-datetime-timezone>=0.59' 'perl-datetime-locale>=0.41' 'perl-params-validate>=0.76')
provides=("perl-datetime=`printf %.4f ${pkgver/./,} | sed 's#,#.#'`")
options=('!emptydirs' 'force')
source=(http://www.cpan.org/authors/id/D/DR/DROLSKY/DateTime-$pkgver.tar.gz)
md5sums=('db64860d71e09d22cbb8c5a7f16c8a40')

build() {
  cd  $srcdir/DateTime-$pkgver

  sed -i 's|3601|3401|' Build.PL META.json META.yml

  perl Build.PL || return 1
  ./Build --installdirs=vendor|| return 1
  ./Build test || return 1
  ./Build install destdir=$pkgdir || return 1

  find $pkgdir -name '.packlist' -delete
  find $pkgdir -name '*.pod' -delete
}
