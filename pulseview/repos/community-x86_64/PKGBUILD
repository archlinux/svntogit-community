# Maintainer: Anatol Pomozov
# Contributor: Thomas Krug <t.krug@elektronenpumpe.de>

pkgname=pulseview
pkgver=0.4.0
pkgrel=1
pkgdesc='A Qt based logic analyzer GUI for sigrok'
arch=(i686 x86_64)
url='http://sigrok.org/wiki/Main_Page'
license=(GPL3)
depends=(libsigrok libsigrokdecode qt5-base qt5-svg boost-libs)
makedepends=(cmake boost)
source=(http://sigrok.org/download/source/pulseview/pulseview-$pkgver.tar.gz)
sha1sums=('6df7718faf02715fc5e0dad0136793cd4db6418b')

build() {
  cd pulseview-$pkgver
  cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr -DCMAKE_CXX_FLAGS=-fext-numeric-literals -DDISABLE_WERROR=ON -DENABLE_TESTS=OFF .
  make
}

package() {
  cd pulseview-$pkgver
  make DESTDIR="$pkgdir" PREFIX=/usr install
#  install -Dm644 contrib/org.sigrok.PulseView.desktop "$pkgdir/usr/share/applications/org.sigrok.PulseView.desktop"
#  install -Dm644 icons/pulseview.svg "$pkgdir/usr/share/pixmaps/pulseview.svg"
}
