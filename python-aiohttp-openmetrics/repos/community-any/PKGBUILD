# Maintainer: Daniel M. Capella <polyzen@archlinux.org>

_name=aiohttp-openmetrics
pkgname=python-aiohttp-openmetrics
pkgver=0.0.9
pkgrel=1
pkgdesc='OpenMetrics provider for aiohttp'
arch=('any')
url=https://github.com/jelmer/aiohttp-openmetrics
license=('Apache')
depends=('python-aiohttp' 'python-prometheus_client')
makedepends=('python-build' 'python-installer' 'python-setuptools'
             'python-wheel')
source=("https://files.pythonhosted.org/packages/source/${_name::1}/$_name/$_name-$pkgver.tar.gz")
sha256sums=('467744922231645fa4400d0ce5199b3d854e4fcada864b881ff4cc38b5901827')
b2sums=('d83300f3e0459125a53f9f14a9bbe3d3ab862ee21153ff3da9d710018cceab47cd89a5a3c677a1a9bfd7f390abfa5e8c42735bd4bc820c81d7abd70c6c349d49')

build() {
  cd $_name-$pkgver
  python -m build --wheel --skip-dependency-check --no-isolation
}

package() {
  cd $_name-$pkgver
  python -m installer --destdir="$pkgdir" dist/*.whl
}
