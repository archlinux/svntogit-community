# $Id$
# Maintainer: Kyle Keen <keenerd at gmail dot com>
pkgname=python-pyzmq
pkgver=2.2.0.1
pkgrel=1
pkgdesc="Python3 bindings for zeromq, written in Cython"
arch=(i686 x86_64)
url="http://www.zeromq.org/bindings:python"
license=('LGPL')
depends=(zeromq python)
source=(https://github.com/zeromq/pyzmq/downloads/pyzmq-$pkgver.tar.gz)
md5sums=('f2f80709e84c8ac72d6671eee645d804')

build() {
  cd "$srcdir/pyzmq-$pkgver"
  # py3 errors added in 2.2.0.1 
  sed -i 's|except socket.error, e:|except socket.error as e:|' zmq/eventloop/ioloop.py
  sed -i 's|except gevent.Timeout, t:|except gevent.Timeout as t:|' zmq/green/core.py
  python3 setup.py install --root="$pkgdir" --optimize=0
} 
