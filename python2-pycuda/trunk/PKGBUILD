# $Id$
# Maintainer: St√©phane Gaudreault <stephane@archlinux.org>
pkgname=python2-pycuda
pkgver=2011.2.2
pkgrel=1
pkgdesc='Python wrapper for Nvidia CUDA'
arch=('i686' 'x86_64')
url="http://mathema.tician.de/software/pycuda"
license=('MIT/X Consortium')
source=(http://pypi.python.org/packages/source/p/pycuda/pycuda-${pkgver}.tar.gz)
depends=('cuda-toolkit' 'python2-numpy' 'python2-pytools' 'python2')
optdepends=('python2-pytest')
makedepends=('ctags' 'python2-distribute' 'mesa')
provides=('pycuda')
replaces=('pycuda')
conflicts=('pycuda')
sha1sums=('026ca33f66d35c82a087a5ef3f8e0f213575059b')

build() {
   cd "${srcdir}/pycuda-${pkgver}"
   python2 ./configure.py \
                  --cuda-root=/opt/cuda-toolkit \
                  --boost-compiler=gcc \
                  --cuda-enable-gl \
                  --cuda-inc-dir=/opt/cuda-toolkit/include \
                  --cudadrv-lib-dir=/opt/cuda-toolkit/lib \
                  --cudart-lib-dir=/opt/cuda-toolkit/lib

   make
}

package() {
   cd "${srcdir}/pycuda-${pkgver}"
   python2 setup.py install --prefix=/usr --root="${pkgdir}" --skip-build --optimize=1
}
