# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Víctor Martínez Romanos <vmromanos@gmail.com>

pkgname=qucs
pkgver=0.0.15
pkgrel=5
pkgdesc="An integrated circuit simulator with a graphical user interface"
arch=('i686' 'x86_64')
url="http://qucs.sourceforge.net"
license=('GPL')
depends=('qt3')
optdepends=('freehdl: to permit digital circuit simulation'
	    'asco: to enable circuit optimization'
	    'perl')
source=(http://downloads.sourceforge.net/sourceforge/qucs/$pkgname-$pkgver.tar.gz
	qucs-gcc-4.5.1.patch)
md5sums=('5a35eee790c92eba97de181b12794823'
         '847cb7d3ed690be5e0c8485310287ba9')

build() {
  cd $srcdir/$pkgname-$pkgver

  . /etc/profile.d/qt3.sh
  export PATH=$QTDIR/bin:$PATH

  [ $NOEXTRACT -eq 1 ] || patch -p1 <$srcdir/qucs-gcc-4.5.1.patch

  [ $NOEXTRACT -eq 1 ] || ./configure --prefix=/usr
  make || return 1
  make DESTDIR=$pkgdir install
}
