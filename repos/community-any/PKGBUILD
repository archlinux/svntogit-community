# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=17.0.2
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('3a0a5819e75a08b9fd10126c281aaff80fe9008ff771497d9fc636cf850751bab73a6da289939d393085991a2bfbb53dc35875e5b17e551b6e9e71bae9eeea93'
        'ce8df87a0b472cfa4656ce8805181a15f71f70e7f5ac42c91e62621c2b340b36ec20a091349c1322b9e1aa58c4f704f87886f802adcd927b9bf9cb1820d1325c'
        '6bf74315338e058aea855860bac10166e4054c9b78d47269422cf7a03f8665f91cba87904ebe9375e72cac392faf20501ac2ea7517684ad06eb6b2c503f81588'
        'bd2f6a363a873b202ec7336a8184309f515a4a9712c8f316bbb2cb5e6fd805da0daf0ae00963c99a6b4cd8da65fe0e2021dfea4049393aeffa1643b84ff5d2c4'
        'cac99240e88cd0d53a6e2197c01cd85adcb04de9b46370a472aa67da8b027238569bec92dd2a892cd6d4d0b58ff4290b5cd76ac33e6c449b57443838e578faac'
        '6b5ecfd48448f58b6200442b11c4872e3de7b33e3bf92c64bbfd9360ed3fdf70d01969531756d2fff980fa304cdb24fa50341e51c9e3b0223a7b267eadae3409'
        'e10b4c9ec9c2b6bcff7d901b79f50d78f717702749a959f39b7b07e09c58dbc6b9503c1a912f23126e30ed81d38de5b936fa3d48e91b7f66bc19b0912e09560f'
        '1a6d9883d314d01bd9ee44e68f108e07f679ec3f94b68e8c74bf192f430407b82fc566c5ca78436fa4eb2f97ad0830bc59da12e45e2472b9de63ddc699aee4ac'
        '16525f1cf1e7b6a17f89287d0086902c85e8189ce1f0f57bb7aa62e6cd03fc34e4ab06e4f6280ebc56f1bbeb6e766a48a946ca09d74210888937c63a4a503541'
        '7b9945ac7884f0d23a0acf7c118070d1933fdc2b5815031c3c140fdc0f2564ccdea51c42ecc8d62e0f877a6ba689dbede75442252a3ed9573f6338b363d4f5c2'
        'cd156d4d2649bf8ba281bcea8176548ea6ea830b9200910f16eacae8fbb09328ec3c4ff5e620314c84bf1be0a2e7fa730aaabf14aabc6f039138de5ae8377b35'
        '3b7620fe2cfb7dba45c415728a7a64e2e4ea7a1e821e02f6ee5aee62754b735a4e3f55ce41a45dd3b13ca9ee4bddf5db0ec9e200b635bbc030255e7d511db8ba'
        'cf35001766705dca1f95ecff89900aff2ab8c8e0d0247e34c3ee3fe32852d91ff56760198d72b4ecb0a547b5d82e0d5c4259e835d284c968cd7cb12916a54301'
        'a0182506b647324c31e784fea0c8b46fadbf3ab29eaf0b22c72cb897ec66c04fcbfe2afaecfc9643e73633e91763f364fb30bc358a69ad9826d9e7d086adb4ec'
        '68e14e4d8295dc7e5fb478bdb12e339cce362dcc35723668ee11dcda32e2578b049188a2ac7e4f295cfdb3e1f0adc41fac4a5129cb744d4917dcd54f3bd81c25'
        '7acad378ca9b1255f0b2a09dec8da7ee4cc349d2f6297be6a53270845f71f93cced8c1153b6c4a00e84925800884e0666ffeb4135390a96976187612a7f98b67'
        '76326777c89c602c3097a1cddf10149ff92521b2fafeb6e902954ba7cc00d99bc4666ce5bf91911362aaab75c5d55dfeb9cbcc2336b7cfc8e976479ed88a29cc'
        'b35e1b6cfe66adcd7472ef906b3abbb280a8d8dcb77e7564a1d7070e1f4664201b2c1d69f6fd4830d029cdebd77cb0e1dcc1c4cb2708c38aa262781183d23558'
        'b35d0eeab87af95dac6789661d1b31ef800be81aa33d6726a3f71e9b75d84ba20d0f3ca8d98fc71179603f3e6077bd447550f799ea49eff8619c9823cb7c0cac'
        '66e9d827ed5fa7f8dfe15a287d282ff5d54325c341afa26b3afeb4a2e889952b4f675426b643e2efb5ed0e79edfd5164ec1b81459739f0d9558f3940b9ac2e47'
        'e273e5a1fbb197fc325b20721c576a3047229ccf2efbb8162e49247f8feffd3a0ea052052121b038190493654427b9ca6216e7a1f1c0063ea557173e6cb05ee7'
        '823c171110eb7370a5cce7bf519110d4bae81907c293c6e4146b5a19ca3e3938606a040a42b45554cf26d73b5914e83a72b6967dc6ae209015f7c8909467fd44'
        'c6898e0211c689cdcc2fa7e73addcc19b9ba0e10c15c3de8cac07f911d8e8889e6fd32347f97f14c77ec2a3949ec949789b3ba7c1066130a62fed4bc820a2718'
        'bdfb4b65263eb921b6e29f5165abc4b4b01f1052ea49eeb9f51d550ff49ab6785d747abbb38e7b0e2b503143d31da8e88d7519d02d26a73fda79880b6ba29cd2'
        '68719948ade92c96fdd37b2508ea4a17570e91791481aef5d7511050fee41fff62b5062a095fce7e25fc3d1ca9ce6e2047028139cf828ec6cc34342bda01392a')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
