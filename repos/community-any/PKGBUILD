# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=16.7.0
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
sha256sums=('7666f22db1887f2be7be88dd031ad1c21d6a5f7ddcb58ca45bcfaa9f644ad173'
            '10d30f5ba00d761e2521a9be7dcfa10b11695f78f76639f873394913f3f7fceb'
            'fab78693477806920804369375b81ceb8288e4ea8a23c520342c9408b5c0ed57'
            'ed99ddcbe401492505e0c2216aff0e246fb576aa8acc2ae6f402de02eb49ce80'
            'f16e5ef6b23ab3c6009a47c2845e1c90ff4f871ea645f7aff0c06ebe2162b6ab'
            'c892bea344a89ec9e7b875de91db537950fe46e946b78244d1219627ecb3f955'
            '2c7212ca79d3b783cf5ce3001f31443b805188e0d4f8e6309bf74f16dbb01f64'
            'fe04c15c76daf1a993891397b590e29be0a6263ca5df8e8d596e25af2db32e16'
            '8d391808f9ae79b01fe5841b626f4a551ae5203cbc7670947aeac5b141e801c2'
            '9bf5eab19c4aa3910b6df49f161bf3e1a8996e17a8772ace9f1b3f7108939c8d'
            '03a27984d865c6b0a474e625e64eace1405a65291c94c4336650131b547b9f78'
            '430348ff6fd0fe9ef0b3c97724d0dc19036be9c1fb1ea7fe87696189db78ac97'
            'ef6fb24ea6e3922ad2ba6de597d1a221719d4131b175001438d358b619f654f0'
            'd7c11ca2f0c6a11c4496dc70db8de5a0ca3846661abf813b43daefbc11436321'
            '17a1b8d43a01aa8f1c4eadd5725ea19cf6becb1726ff4a710e97d2620c1af7d5'
            'ec9c9718f3572a14ca5e62cdf700b71417d7f5d35fd204ef9c87f6ecfaacc819'
            '3894811828cd87060b93613649b37e8543a22286d9c8c5a27f1be9120470dd9e'
            '0fe2d9e2c8e4c5951963d14cfff6c524de534a76213b4e7a227c5429e9224e94'
            '5c8dae56e53b054e0759b98ae9b6947ccd5cf1e276dc836e7ded19e2f3397012'
            '64942586573b0daa53935579dec0e1bbb5547b389c1d42e643d78751fe2c96ba'
            'ccf841ebf3cae31a6227183008e2b721a71113d41d5bb9e127c9aaee2e429e47'
            'ec95df0e478797bc7168fe3f269dd269f8b92cb53f305482ae982dfc12cab1f7'
            'fec1e1abc47c54bc0c24f04bc946a9af1d24139fa97f9f05d0c6c5be53154c35'
            '40fc388b161ce593163779cf42cf620dc964031b50d80b1331b3872acf0cf245'
            '46ecadda73abf39cda76731a94fd357b743f882dc1156b4410a2967a811c4ff1')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
