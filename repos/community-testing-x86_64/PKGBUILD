# Original Contributor: Adam Griffiths 
# Contributor: Nick B <Shirakawasuna at gmail _dot_ com>
pkgname=nvidia-cg-toolkit 
pkgver=2.2
pkgrel=2
pkgdesc="nVidia Cg libraries" 
arch=('i686' 'x86_64')
url="http://developer.nvidia.com/object/cg_toolkit.html" 
license=('custom')
depends=('glibc') 
conflicts=('cgcompiler') # replaces cgcompiler 
source=(http://developer.download.nvidia.com/cg/Cg_2.2/Cg-2.2_April2009_x86.tgz
	COPYING) 
  [ "$CARCH" = "x86_64" ] && 
  source=(http://developer.download.nvidia.com/cg/Cg_2.2/Cg-2.2_April2009_x86_64.tgz
	  COPYING)
md5sums=('acb2a5e6b2b05f04be3b37cb758ae002'
         '4d2071b0ee627e8dabbc754ffe01927c')
  [ "$CARCH" = "x86_64" ] && 
md5sums=('59b487d2d729d34e0696bb967f250409'
         '4d2071b0ee627e8dabbc754ffe01927c')
build() { 
 install -Dm755 ${srcdir}/usr/bin/cgc ${pkgdir}/usr/bin/cgc
 install -dm755 ${pkgdir}/usr/include/Cg
 install -m644 ${srcdir}/usr/include/Cg/* ${pkgdir}/usr/include/Cg
 install -dm755 ${pkgdir}/usr/lib
 [ "$CARCH" = "i686" ] && install -m644 ${srcdir}/usr/lib/* ${pkgdir}/usr/lib
 [ "$CARCH" = "x86_64" ] && install -m644 ${srcdir}/usr/lib64/* ${pkgdir}/usr/lib
 install -dm755 ${pkgdir}/usr/share/man/man3
 install -m644 ${srcdir}/usr/share/man/man3/* ${pkgdir}/usr/share/man/man3
 install -dm755 ${pkgdir}/usr/share/man/manCg
 install -m644 ${srcdir}/usr/share/man/manCg/* ${pkgdir}/usr/share/man/manCg/
 install -Dm644 ${srcdir}/COPYING ${pkgdir}/usr/share/licenses/nvidia-cg-toolkit/COPYING
 cp -r ${srcdir}/usr/local/Cg ${pkgdir}/usr/share/
 find $pkgdir/usr/share/ -type d -exec chmod -R 755 '{}' ';'
 find $pkgdir/usr/share/ -type f -exec chmod -R 644 '{}' ';'

}
