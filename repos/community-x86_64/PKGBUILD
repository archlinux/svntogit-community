# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=pd-lua
pkgver=0.11.3
pkgrel=1
pkgdesc="LUA embedding for pd"
arch=(x86_64)
url="https://github.com/agraef/pd-lua"
license=(GPL2)
groups=(pd-externals pro-audio)
depends=(gcc-libs glibc lua pd)
source=($pkgname-$pkgver.tar.gz::https://github.com/agraef/$pkgname/archive/$pkgver.tar.gz)
sha512sums=('e014611641793a0f9d26664fd7a52f8eef096544f0a39f3ff66fd0e8d61eeb5f345b2b01b799fa10a82a41275b7b8fb2ac327b3524193158a36fcad03c952a0c')
b2sums=('86d7a3d4f5cb3b039066363d3720ad5bfd90faa99ef0f95b193e6011ce67df0973b19c7473c497f61365e1f03feb5e2c6cafab1c7252c2f177dfdae603083417')

build() {
  make LDFLAGS="$LDFLAGS" CFLAGS="$CFLAGS" -C $pkgname-$pkgver
}

package() {
  make DESTDIR="$pkgdir/" PDLIBDIR=/usr/lib/pd/extra prefix=/usr install -C $pkgname-$pkgver
  install -vDm 644 $pkgname-$pkgver/README -t "$pkgdir/usr/share/doc/$pkgname/"
}
