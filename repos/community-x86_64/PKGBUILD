# Maintainer: David Runge <dvzrv@archlinux.org>

pkgname=pd-lua
pkgver=0.11.0
pkgrel=1
pkgdesc="LUA embedding for pd"
arch=(x86_64)
url="https://github.com/agraef/pd-lua"
license=(GPL2)
groups=(pd-externals pro-audio)
depends=(gcc-libs glibc lua pd)
options=(debug)
source=($pkgname-$pkgver.tar.gz::https://github.com/agraef/$pkgname/archive/$pkgver.tar.gz)
sha512sums=('f726d126803bb4a26d1663dc2901205a7b9068135e3ab27db0aedec7ead5bf8066c3da1bbbc6252c2bab23d338e368c6614d9a3b525b37ed755a20182b794140')
b2sums=('bce1f38c65001d7d16a11f3d249dfa32c7f78c778918aada82f4ed8166315b10f965b221f26929d95aa2c2199bb38faa27435d53145fce34cb33d9da1876474b')

build() {
  make LDFLAGS="$LDFLAGS" CFLAGS="$CFLAGS" -C $pkgname-$pkgver
}

package() {
  cd $pkgname-$pkgver
  make DESTDIR="$pkgdir/" PDLIBDIR=/usr/lib/pd/extra prefix=/usr install
  install -vDm 644 README -t "$pkgdir/usr/share/doc/$pkgname/"
}
