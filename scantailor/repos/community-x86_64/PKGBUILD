# $Id$
# Maintainer: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Denis Terskov aka neurosurgeon <terskov.den@gmail.com>

pkgname=scantailor
pkgver=0.9.10
pkgrel=1
pkgdesc="Interactive post-processing tool for scanned pages"
arch=(i686 x86_64)
url="http://scantailor.sourceforge.net"
license="GPL"
depends=('qt')
makedepends=('cmake' 'boost')
options=('!makeflags')
source=(http://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz
	build-fix.patch)
md5sums=('f962c93a2d63b449fa3f6612ade3b028'
         '0aeb1bae724b5cae208ae8af95e8ed9b')

build() {
  cd $srcdir/$pkgname-$pkgver
  unset CFLAGS
  unset CPPFLAGS
  unset CXXFLAGS
  patch -p1 <$srcdir/build-fix.patch
  cmake  .
  cmake \
	-DCMAKE_CXX_FLAGS="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_CXX_FLAGS_DEBUG="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_CXX_FLAGS_RELEASE="-DBOOST_NO_MEMBER_TEMPLATE_FRIENDS" \
	-DCMAKE_INSTALL_PREFIX=/usr \
	-DCMAKE_BUILD_TYPE=Release .
  make
  make DESTDIR="$pkgdir" install
}
