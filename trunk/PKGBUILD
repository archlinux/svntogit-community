# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=17.0.4
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('f81dae5b59b20d7be5e271a7120958c5d7cfba4f81d6d1c13b13c6e46f113c3c16b51da2153899123b2a7642502991ac5af8dd4ae3934a659c454219da483408'
        '2afaefbb3a4291e7a131460ad99ebbf8913ffc17abb08c809c1109ea74ebecbba855e1f9488b3cc19a30f9cec4a053541659af25228c159f33698af30136f3fe'
        'e7b27375d94b746acfce27e442248fe944d7596ef874907a9ec4732f35e4d2cfeef068e25f4a25314c7bb772b55ba704e47bb55dfdf962838348c46de885c792'
        'aef8d37396c3bb5bb42258019a23ef5b73086eb0a0b927d4d98c8add07fa79966060e5a162637796cf58046f15d6645fe3666a319a363f67240cfafcab1c21b4'
        'd31dd815fbfc8a96ea2651215e39617790371209655ef6009f2cceaf8d9a490ba699f5bb60c847bcc275bae887747ae34104dba981dc5a2505cdb0cf634e0c35'
        '6a678346caaf62c4ed1cac96ff836aa4d84b7dd1c71e2c56e878eba04e25a65ea76b834cea8b01aed91cecbd57551d133c0ea702967fb928c77e2baa228a109f'
        '1d3cf4cf9141627bea10758bdb4a1e0e810b1f91f9dbdfad85476a0da37cae7521ab1471825361c303c26dee2117a38668d620c1b4632033525d7b637266e24c'
        '1ff3d1d52507393664338c5257777edf8cf7dc91b35d9bbad15a20432c41acf2138c31ff4f933bce67ca91d6bdb5b7f09f10d1a9b4da2bddc4c9b8802f406515'
        'eac1ebc1dd3c77dd052fc0058f0b6c2057c84dcd177f4449a5fa766cb361a9c9a2524627e4f9fecc36d33c83ad07cc01e1693d1870aebeb887150dffbbdd0944'
        'cfa13acadfa8d62a1182a2d36170482e0afa3d389228b08b48b8434053156e65a41a2d3616afc76170436ba97c691522b2dde7e2abea8a9e4aae30b60887ab67'
        '71bd3933ef43b8cade46539b7518b68ea827704230cb7c713bfb406caa54daa6d90dff3687b0ef9d58c59053624a094443a6781ad03b337b3880cb1f447b3777'
        'e09d69427199cdf8eaa86107816952e1bb0077993f6de0309430f4ac9f20762a167331e1d993d98c542c90ac518610e7f8720d82381346e67a7045265c446102'
        'e9b38d20465a07c37f49f08ad2fcb740d5aeae114b402981e1e4c3c8d55089a92260f70c778e0f9458315981ef9ffb9cc409f240812bf478419521c884bc3fa9'
        '56a433b67f1bcc96ea690e42b84ab2346aecdd44e1b83412f3ef9545150252be3c0449bed3a9fc8b458c41fc5e3c8f5055f8a8f575996f24bc15bc409b63036c'
        'f9821197a27d241f05651dcc19849d3855b4f6611c011229ec37cd8ea834e66245c432cc12e222df9a3c744a7d6da494f021b20c4b5dde9c41955b139a9fc69b'
        '9be0d70dd8383154cc2559ae043e34021dde0af37eca5de33d49bb7970a9255e2ad54b270eda179477c6933f531eb702787f5984ea8fa1909e081c67501a7380'
        '7c9a6488f853ba72a565eaa69839d441d9139dd809162807b1ad2a87efede842a847ba104c03445cc7a7b56006c307dafa97ec28636e833ade6e27355958286a'
        '1822eb0377dd50fee561c2af13a59cd95dd2bddc3d1f617e96d3c68c5933320409beda0764edaee4733575dee64c4f90a9cd5aa4dc0cf64dad2d53e3d3d31b9c'
        'c4cf6714bed110866438aede118768069d64f339293655229fcbb84444739c1ca79ded58c98a3d1ac6340d584dfceb6290677a2ac433abd46ec2280a4809c789'
        'e9316b8805b78cada2e0b578e1eb2586b57087c1d09b070dc6b5b192112066ad07ab46bcaf1a36062c2e332f736b70ad3cb802168f3ca72620b50428f512fafa'
        '663d5265ac3cf8a05b7812dfe28e259ab0972c83e99cf8f53dd39098e0635c5322142f2294cf59ff32fc1e7a6e6022ff9362d191f53fcf97dba4e136650e1864'
        'cac9074083715fa4e069846385679dc11771da98c849de4d933de2b1c9e03962c2e9dac0fc2ab56ddd15dc1a8faac5ee7f708390d8943c816c21da916c4c62e8'
        '92173eacb22db97c521bd2f79a44ae57d7d1f3831619bd76d299fcbb897f28461e69a8226508312072df17b06091c3fad54df16f66390912464a9237972e5e69'
        '8b56f7413564a154e2a7d368ce36aae59fc040499816e987ddbd737e3b28d00fdf28d76906ece5e1d6eac83455475e3825061f756f49a7061940d04422f3c838'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
