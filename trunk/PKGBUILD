# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=17.1.0
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
b2sums=('02d98d6b8e58463605cdb1195ba3ad460a5916b8a4fabf54764d455c1cd9ee14344db666388a565f6feb6057e6d97b052fb1af6c4a4edaffb51b5b9b5945a99e'
        '5b57429e93c933657954aba0a3486e3b3c0618f94b153a7ffb198afbf46dcfa05067aae119c82845e984bed187a15364e586116d16355b57bfb12f68fe68a895'
        'ebe97b055f71eaef02d071fb267d23bc47153ba5068f4f20c613c2f7a57a59355b7b9aba76da516505fb60a09ad787add890911c915aff3fee830ad4a434491d'
        '1ad0a56452547863eac39521e494f18df565145db2e6b6d391e84f3547deee0c38d148a8236b400fabbf0d580d2ca9d42627898a6f14600a2ed394ce7f952345'
        '13ecd4238d419de8e6b3ea8e6997c74b5616213eb8cfcd4989900b3971926a7a3fa7e640d659650a64955cc85b7c429867e347cb1b3f54c06ca28a47e335f64e'
        'a913a55e6e9aecde6e53a5f9ee2f705af1f1d404fae77bdf1abae8af89ffdc88320ccfeee89c26212e3564cd8d14853a6518415b8ef820bfee2b31ff3a2166fe'
        '11cd74807c185b57b92226f8b0ed88bbc3ef7c2f78b9d86cd1027cdae505d0d353f156a56513d7ba678031eb565d9c6fd6ceb55489b7b9652caddfa078a7e4a5'
        'f6edbd05672662d24662c0c1d42dc4c95be9af29e7837568d77858c1437c6b97c7476fdf6b9367fd22c4604ba43c8271b90dd9a03afadb31bf85611f0015e37b'
        '8d8f298ee34aa8571b8bdbbdce2bac2ab8bb5ba5080026d3a34149d601de7a8d3a8f669a598d422f7ccf025aff6a930cd0b0e0c8b933e572c5c569eccfd9772b'
        '3005e0b86bf337e69b8cbc5fa0c703ef27f8aa1f92f147ba0dc7d86b39163dbb9be69b9210cc5c9483f3848baee3145198641fd511b8f810addfcf798bda42cf'
        'ce26cc272a569edde28f8f4f1776571cea490900ee39953ef4a06047d34780c358e0617d6d7ce07682a96230e220f9c08b724a1be4d95eaac68fbdca31f637ff'
        '7a35efafd0d909c75fd741547092841d478e4c15048b3e576fce8b8cd628baff370d31a9bfa9dcb68acffe8aa08787d25433077f834153a4eb47725055a411c0'
        '4be111064ef69f33fc304b07e2f0640691f0c67b0b64866114cab58d5c2df1bb2b8dd27363a58cd4b5770c3dc89cf597bf3d017febba41cccd198390d17d03d8'
        '8a619bbd9bdc666e3142da197da2a5783ba49953a7500e4200255a27f75bf8cad4c22369de8241cc4d632020affb5f4c3f00c8730d6b86935f45a6d2d28678c3'
        '3ec0c0d5447c2a389604c86695ccf9d911f8cfa3cc4b7cc7a4b8d3bca1582f3e66226eca2bd93df3f378cb58a616344d547a95dabba3839aab198dd799efec3c'
        '798b8d646c198ab135ff70668ff6e8bf99ab9885e40aa41de7bf57bea720d5e35afdc42dd6f8680346b5f90221f489fb1060d03be3cf14ad7c63286622a916fd'
        '5930b1119ca542e8eea54fac2ed443bbb3c4535d9d46f82819d14a10ec64812a27eac06470704396e51274cdf9554489c3487ee6e532dc1ab36f44d9ba3281a1'
        '0103b0e7d96a7ed470e6f0862d63a3f079279dc618b120d437540b0c091a7a5d1eedab856a6f24c026e773f343e1ca188392e06477627c04294998ca2a9f7719'
        '2de639f443a575ee2b99457612d30cad90c18dc93472e47140af8f32095c2b242c17d2bc17b86a48ba10bc5677ad307feae12702f7b8b20f26eb3c2b24f59316'
        'b3563364d832bb55469081c0ceb1b05cad29b30fc43ee253ce17fa047fc3c0acf0bd0b0c581fcf21f9f2b927da46fb96c9b1c79061a28a9b4f39426fac1e4df2'
        '209df562b4818adf4fbb4c68a4c89ce8d8c123dbbe4b0e92fe9a722368d96f8e660470745b1173d58a505c30140ae6cf7623c6299f28a460b7dc63fe603ebd36'
        '130b9ccc13daabc30ed3ab23372bfb97be38b22b6a45225a288b6dd251492a65c3993cfec297747d829853bfc1e5a9bca1ca2b22973ad0e8d71b9bdcad860a36'
        '95ae240843f8890aaadc499e8964a96252ce5b879f623a534f53a2b85f6557cbe9410fc3e0681aa0a73c098b1a5ea0adbd2e1b6073859e55658ff46f36f28782'
        '3b6683a05b046215c8b6427d7dc0eef53d6233816edeeee080af1c4fcf5589c7a29e161bcb783c1dd379bb16244349c3b5266d3e9b33d4f49f8b32de443758bc'
        'c8d1b8e38801d7c1645eb250bc36922b7286b60d96be99f0bed2ce82939d299b343cca4a5767d2c1a1f11226326009828b49a11ce0ced9682af53e44a8afbc28')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
