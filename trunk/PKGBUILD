# Maintainer: Konstantin Gizdov <arch at kge dot pw>
# Maintainer: T.J. Townsend <blakkheim@archlinux.org>
# Contributor: Markus Weimar <mail@markusweimar.de>

_pkgbase='iosevka'
_type='ttc'
pkgbase="${_type}-${_pkgbase}"
pkgname=(
    "${pkgbase}" "${pkgbase}-aile" "${pkgbase}-curly" "${pkgbase}-curly-slab" "${pkgbase}-etoile" "${pkgbase}-slab"
    "${pkgbase}-ss01" "${pkgbase}-ss02" "${pkgbase}-ss03" "${pkgbase}-ss04" "${pkgbase}-ss05" "${pkgbase}-ss06"
    "${pkgbase}-ss07" "${pkgbase}-ss08" "${pkgbase}-ss09" "${pkgbase}-ss10" "${pkgbase}-ss11" "${pkgbase}-ss12"
    "${pkgbase}-ss13" "${pkgbase}-ss14" "${pkgbase}-ss15" "${pkgbase}-ss16" "${pkgbase}-ss17" "${pkgbase}-ss18"
    )
pkgver=16.6.0
pkgrel=1
pkgdesc='Typeface family designed for coding, terminal use and technical documents.'
arch=('any')
url='https://typeof.net/Iosevka/'
license=('custom:OFL')
source=("${pkgbase}-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-${pkgver}.zip"
        "${pkgbase}-aile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-aile-${pkgver}.zip"
        "${pkgbase}-curly-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-${pkgver}.zip"
        "${pkgbase}-curly-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-curly-slab-${pkgver}.zip"
        "${pkgbase}-etoile-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-etoile-${pkgver}.zip"
        "${pkgbase}-slab-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-slab-${pkgver}.zip"
        "${pkgbase}-ss01-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss01-${pkgver}.zip"
        "${pkgbase}-ss02-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss02-${pkgver}.zip"
        "${pkgbase}-ss03-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss03-${pkgver}.zip"
        "${pkgbase}-ss04-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss04-${pkgver}.zip"
        "${pkgbase}-ss05-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss05-${pkgver}.zip"
        "${pkgbase}-ss06-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss06-${pkgver}.zip"
        "${pkgbase}-ss07-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss07-${pkgver}.zip"
        "${pkgbase}-ss08-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss08-${pkgver}.zip"
        "${pkgbase}-ss09-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss09-${pkgver}.zip"
        "${pkgbase}-ss10-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss10-${pkgver}.zip"
        "${pkgbase}-ss11-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss11-${pkgver}.zip"
        "${pkgbase}-ss12-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss12-${pkgver}.zip"
        "${pkgbase}-ss13-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss13-${pkgver}.zip"
        "${pkgbase}-ss14-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss14-${pkgver}.zip"
        "${pkgbase}-ss15-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss15-${pkgver}.zip"
        "${pkgbase}-ss16-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss16-${pkgver}.zip"
        "${pkgbase}-ss17-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss17-${pkgver}.zip"
        "${pkgbase}-ss18-${pkgver}.zip::https://github.com/be5invis/Iosevka/releases/download/v${pkgver}/${pkgbase}-ss18-${pkgver}.zip"
        "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md::https://raw.githubusercontent.com/be5invis/Iosevka/v${pkgver}/LICENSE.md")
sha256sums=('96c9dd09878725ffe23e8cba2ad7bc58f6bf45ac0bf0e0bbdd565bdd73336f3b'
            'cf2e245c1664ceb7e4cf8d6affd5c4c98e479c8801f294fe7d4a13715f0caa60'
            '3531a7a8104c2923fdbdbc00fcdf0c42d723cda92f3042ecc78dc62098105081'
            'ddaeed5ca01c1ad25e9789e4cabc8b9da1009219b0ebde5ce6bd3af8f77befbc'
            '14c14a796690b3605be98f966ebaea9814f5c5cf1b195a34ac7df6f171244770'
            'ce3d6d79622c81bf857db887d312e8ff77d3dcfa7e4ba7c874658efd204d0e2c'
            '69574c40db5f76be22bc55553ea07908ee5df6aa21b72c6dc0516091f9114e17'
            'f55c15e10753e65b9a462e849a4c0e089d0027fec90db1e247f98b7b883dcca1'
            'ce406142d788c044d83c9f1dc81550ca6e432c8615b498ab971d522a41026985'
            '68ec1785cec24244a7414097aafab23587b65241c81cd85d2ff314b911476a78'
            '5006b7e90537e46224167201e66afb039bde07e4f851e823ff619ce4e7f6aa0d'
            '351f56fe43f4bf653fd0f9a039355ec69d57c8bf4237434da2267ddb35250d59'
            '1b398a33fe43ac84c8046bd53737001a37fc06afd462cc0885891adea0a2fd14'
            'e13dd5c4c9fb38338a37073e906f3b757312f6c187d9364299c959dc79296198'
            '211bd207e536c2185d753289acbb68915ad50652368305b2441e30adeb3c45d5'
            '85cd67ba2ea49a8a77fdf90fc58c4bfd70baa01388d685789b2c2d3dde5f6a63'
            '8e7e440935255ab7b7b97241ad525dff086e449cb84aefb24b3a7d299c7ec508'
            'fb13fc8f1f224cb9b9012d52c9655f24dd251c74537f13eb4ae6860c1626a062'
            '22d8a2d95ed6d8a60d90059201e5c3e3bf761ab0d5b4f8a76bba914e78f85fb5'
            'bb370f5f6310b48ec0cb699619fdcc4b8e8dc57f59b8cc537fe70b8ee6859a59'
            '8ca301174da96289d12b6e505620cce4269b436d9be8007a2c9389cecc1434f3'
            'bc3d28af9fbecd1fdf94ee50745f3993e8ef4708b9a512efddf18eeba85e0cef'
            '91c3271b1906e9d73b4f75ae3ff4216f54c6cad0fd7551a1569a23bcec163e7b'
            '937ae2b538b8cb0c2092ce9344f454d320a52fc8bb67491022d8518bc71a9771'
            '46ecadda73abf39cda76731a94fd357b743f882dc1156b4410a2967a811c4ff1')



function _package() {
    cd "${srcdir}/"
    local pkgnm="${1}"
    local fontname="${pkgnm#${_type}-}"
    local fontvar="${pkgnm#${pkgbase}-}"
    fontvar="${fontvar^}"
    install -d "${pkgdir}"/usr/share/fonts/TTF
    install -m644 "${fontname}"-*.ttc "${pkgdir}"/usr/share/fonts/TTF/
    install -d "${pkgdir}"/usr/share/licenses
    if [[ "${pkgnm}" == "${pkgbase}" ]]; then
        rm -rf "${pkgdir}/usr/share/fonts/TTF"/*{aile,curly,etoile,slab,ss}*
    else
        if [[ "${pkgnm}" == "${pkgbase}-curly" ]]; then
            rm -rf "${pkgdir}/usr/share/fonts/TTF"/*curly-slab*
        fi
        if [[ "${pkgnm}" == "${pkgbase}-curly-slab" ]]; then
            pkgdesc+=" (Curly Slab variant)"
        else
            pkgdesc+=" (${fontvar} variant)"
        fi
    fi
    install -D -m644 "${pkgbase}-${pkgver}-${pkgrel}-LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgnm}/LICENSE.md"
}

for _pkgname in ${pkgname[@]}; do
    eval "function package_$_pkgname() { _package $_pkgname; }"
done
