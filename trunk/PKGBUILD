# $Id$
# Maintainer: Bart≈Çomiej Piotrowski <nospam@bpiotrowski.pl>
# Maintainer: Christian Hesse <mail@eworm.de>
# Contributor: Jon Eyolfson <jon@eyolfson.com>

pkgname=gitolite
pkgver=3.6.2
pkgrel=2
pkgdesc='An access control layer on top of git'
url='https://github.com/sitaramc/gitolite'
arch=('any')
license=('GPL2')
depends=('git' 'perl')
conflicts=('gitolite-git' 'gitolite-g2-git' 'gitolite-g3-git')
install=gitolite.install
source=("${pkgname}-v${pkgver}.tar.gz::https://github.com/sitaramc/${pkgname}/archive/v${pkgver}.tar.gz")
sha256sums=('012c372b53d765558131ae0df23a590d41b042c8b88e38e952992caf52fc4fbf')

build() {
	cd "${srcdir}/${pkgname}-${pkgver}/src"

	echo "v${pkgver}" > VERSION
}

package() {
	install -d "${pkgdir}/usr/lib/gitolite"
	cp -a "${srcdir}/${pkgname}-${pkgver}/src/"* "${pkgdir}/usr/lib/gitolite"
	install -d "${pkgdir}/usr/bin"
	ln -s "/usr/lib/gitolite/gitolite" "${pkgdir}/usr/bin/"
}
